<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>華梵禮儀｜真心．真意．安心託付 - 24H 專業生命禮儀</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#465B40', 
                        primaryDark: '#2F3E2B', 
                        secondary: '#2F3E2B', 
                        accent: '#C5A670', 
                        warm: '#F7F5F0', 
                        pale: '#E3EBE5', 
                        surface: '#FFFEFA', 
                        emergency: '#9F4A46', 
                        text: '#3D443B', 
                        menu: '#E5E7EB', 
                    },
                    fontFamily: {
                        serif: ['"Noto Serif TC"', 'serif'],
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(70, 91, 64, 0.1)',
                        'gold': '0 4px 20px -5px rgba(197, 166, 112, 0.4)',
                        'red-glow': '0 4px 15px rgba(159, 74, 70, 0.4)',
                        'rose-glow': '0 4px 15px rgba(192, 132, 132, 0.2)', 
                        'gold-lg': '0 25px 50px -12px rgba(197, 166, 112, 0.5)', 
                        'glow': '0 0 15px rgba(197, 166, 112, 0.3)',

                    }
                }
            }
        }
    </script>
    <style>
        /* 自定義樣式 */
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #F7F5F0; color: #3D443B; }
        h1, h2, h3, .serif-font { font-family: 'Noto Serif TC', serif; }
        
        .text-shadow-lg {
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        
       .hero-bg {
            background-image:
                linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(94, 115, 90, 0.65) 100%),
                url('hero.webp'); 
            background-size: cover;
            background-position: center;
	    background-attachment: scroll; /* ✅ 優化：改為scroll，避免持續重排 */
            /* 降級支援：不支援 WebP 的瀏覽器使用 JPG */
            background-image:
                linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(94, 115, 90, 0.65) 100%),
                url('hero.jpg');
        }
        
        @supports (background-image: url('data:image/webp;base64,')) {
            .hero-bg {
                background-image:
                    linear-gradient(to bottom, rgba(0, 0, 0, 0.1) 0%, rgba(94, 115, 90, 0.65) 100%),
                    url('hero.webp');
            }
        }



        /* --- 隱藏原生卷軸 (Hide Default Scrollbar) --- */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* 金色脈衝動畫 */
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(197, 166, 112, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(197, 166, 112, 0); }
            100% { box-shadow: 0 0 0 0 rgba(197, 166, 112, 0); }
        }
        .animate-pulse-gold {
            animation: pulse-gold 2s infinite;
        }
        
        /* 自然擺動動畫 (樹影) - 全域應用 */
        @keyframes sway {
            0%, 100% { transform: rotate(-2deg) translateX(-10px) scale(1.1); }
            50% { transform: rotate(1deg) translateX(10px) scale(1.2); }
        }
        .animate-sway {
            animation: sway 25s ease-in-out infinite;
        }

        /* 超慢速旋轉 (背景極光) */
        @keyframes spin-very-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin-very-slow {
            animation: spin-very-slow 200s linear infinite;
        }

        /* 全域漂浮落下動畫 (Leaves/Feathers) - 垂直跨度加大 */
        @keyframes global-float-down-1 {
            0% { transform: translate(0, -10vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; } /* 初始顯示 */
            90% { opacity: 1; }
            100% { transform: translate(15vw, 110vh) rotate(360deg); opacity: 0; }
        }
        @keyframes global-float-down-2 {
            0% { transform: translate(0, -10vh) rotate(45deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translate(-15vw, 110vh) rotate(-180deg); opacity: 0; }
        }
        
        /* 光之河路徑動畫 */
        @keyframes stream-flow-vertical {
            0% { stroke-dashoffset: 2000; }
            100% { stroke-dashoffset: 0; }
        }

        .animate-global-float-1 { animation: global-float-down-1 25s linear infinite; }
        .animate-global-float-2 { animation: global-float-down-2 35s linear infinite; }
        .animate-global-float-3 { animation: global-float-down-1 40s linear infinite; animation-delay: -15s; }
        
        /* 快速落下 (前景) */
        .animate-global-float-fast { animation: global-float-down-1 15s linear infinite; }

        .animate-stream-flow { 
            stroke-dasharray: 2000;
            stroke-dashoffset: 2000;
            animation: stream-flow-vertical 80s linear infinite; 
        }

        /* 微塵浮動動畫 (Particles) */
        @keyframes float-particle {
            0%, 100% { transform: translate(0, 0); opacity: 0.6; }
            50% { transform: translate(10px, -20px); opacity: 1; }
        }
        .animate-float-particle {
            animation: float-particle 8s ease-in-out infinite;
        }


        /* Tab Transitions */
        .tab-content {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            opacity: 1;
            transform: translateY(0);
        }
        .tab-content.hidden-content {
            display: none;
            opacity: 0;
            transform: translateY(10px);
        }
        
        /* Desktop Active State (Underline Style) */
        .tab-btn {
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
        }

        
        /* Desktop: Active State */
        @media (min-width: 768px) {
            .tab-btn.active {
                color: #465B40;
                background-color: white;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                border-bottom: 4px solid #C5A670;
            }
            .tab-btn {
                color: #9CA3AF;
                border-bottom: 4px solid transparent;
            }
            .tab-btn.active::after {
                content: '';
                position: absolute;
                bottom: -12px;
                left: 50%;
                transform: translateX(-50%);
                border-width: 8px;
                border-style: solid;
                border-color: #C5A670 transparent transparent transparent;
            }
        }

        /* Mobile: Custom Active State (Squarer, No Scroll Layout) */
        @media (max-width: 767px) {
            .tab-btn {
                border-radius: 12px;
                padding: 0.5rem 0.25rem;
                background-color: transparent; 
                color: #6B7280; 
                font-family: 'Noto Sans TC', sans-serif;
                border: 1px solid transparent;
                width: 100%;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 4px;
            }
            
            .tab-btn i {
                color: #9CA3AF; 
                font-size: 1.25rem;
            }

            .tab-btn span.tab-text {
                font-size: 0.85rem;
                line-height: 1.2;
            }

            .tab-btn.active {
                background-color: #FFFEFA; 
                color: #465B40 !important;   
                border: 1px solid #C5A670; 
                box-shadow: 0 4px 8px rgba(197, 166, 112, 0.15); 
                font-family: 'Noto Serif TC', serif; 
                font-weight: 700;
                position: relative; 
            }
            
            .tab-btn.active i {
                color: #C5A670; 
            }
            
            /* Triangle Indicator */
            .tab-btn.active::after {
                content: '';
                position: absolute;
                bottom: -6px; 
                left: 50%;
                transform: translateX(-50%);
                width: 0; 
                height: 0; 
                border-left: 6px solid transparent;
                border-right: 6px solid transparent;
                border-top: 6px solid #C5A670; 
                display: block;
            }
            
            /* Hide description on mobile */
            .tab-btn .mobile-hide-text {
                display: none;
            }
        }

        
        /* 試算器滑桿 */
        input[type=range] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none; /* 標準屬性，放在最後 */
            background: transparent; 
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #C5A670;
            border: 2px solid #fff;
            cursor: pointer;
            margin-top: -10px; 
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #E5E7EB;
            border-radius: 2px;
        }
        
        .decor-line::after {
            content: '';
            display: block;
            width: 50px;
            height: 3px;
            background-color: #C5A670;
            margin: 1rem auto 0;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 1s ease-out forwards;
        }

        @keyframes phone-ring {
            0% { transform: rotate(0deg) scale(1); }
            3% { transform: rotate(-5deg) scale(1.05); }
            6% { transform: rotate(5deg) scale(1.05); }
            9% { transform: rotate(-5deg) scale(1.05); }
            12% { transform: rotate(5deg) scale(1.05); }
            15% { transform: rotate(0deg) scale(1); }
            100% { transform: rotate(0deg) scale(1); } 
        }
        
        .animate-attention {
            animation: phone-ring 3s infinite ease-in-out;
            transform-origin: center;
        }

        .gold-border-left {
            position: relative;
            overflow: hidden; 
        }
        .gold-border-left::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px; 
            height: 100%;
            background: linear-gradient(180deg, #9C8252 0%, #EEDC9A 50%, #9C8252 100%);
            z-index: 10;
        }

        /* --- Header 樣式：米色底 + 綠色網點 --- */
        .bg-dots-pattern {
            background-color: #F7F5F0; /* 米色底 */
            position: relative;
            overflow: hidden; /* 防止偽元素溢出 */
        }

        .bg-dots-pattern::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* 繪製網點：主色綠 #465B40 */
            background-image: radial-gradient(#465B40 1.2px, transparent 1.2px);
            background-size: 14px 14px; 
            opacity: 0.25; /* 降低透明度，變成淡淡的紋理 */
            
            /* 關鍵：使用 mask 讓左邊消失，右邊顯現，模擬「疏 -> 密」的過渡 */
            -webkit-mask-image: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.1) 30%, black 100%);
            mask-image: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.1) 30%, black 100%);
            
            pointer-events: none; /* 確保不擋住點擊 */
            z-index: 0;
        }

        /* --- 選單樣式：綠色底 + 米色網點 (反轉) --- */
        .bg-dots-pattern-reversed {
            background-color: rgba(70, 91, 64, 0.95); /* 品牌綠 #465B40 + 95% 不透明度 */
            position: relative;
            overflow: hidden;
        }

        .bg-dots-pattern-reversed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* 米色圓點 #F7F5F0 */
            background-image: radial-gradient(#F7F5F0 1.5px, transparent 1.5px);
            background-size: 14px 14px; 
            opacity: 0.15; /* 稍微淡一點，避免過於搶眼 */
            
            /* Mask: 同樣左淡右濃 */
            -webkit-mask-image: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.1) 30%, black 100%);
            mask-image: linear-gradient(to right, transparent 0%, rgba(0,0,0,0.1) 30%, black 100%);
            
            pointer-events: none;
            z-index: 0;
        }

        /* --- 循環卷軸動畫 (從空白文字檔拷貝移植) --- */
        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .animate-scroll {
            animation: scroll 30s linear infinite; /* 30s 完成一次循環，可調整速度 */
        }
        /* 滑鼠移入時暫停動畫，方便查看 */
        .hover\:pause:hover {
            animation-play-state: paused;
        }
        
        /* 左右漸層遮罩 (從空白文字檔拷貝移植) */
        .mask-gradient-x {
            -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
            mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
        }
    </style>
</head>
<body class="text-text bg-warm relative">

    <!-- 1. 全域背景層 (Global Background Layer) - Z-0 -->
    <!-- 包含極光、紋理、光之河：位於最底層 -->
    <div id="global-bg-layer" class="fixed inset-0 w-full h-full pointer-events-none z-0 overflow-hidden">
        
        <!-- 動態極光/光暈背景 -->
        <div class="absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-gradient-to-br from-warm via-[#F0EFE9] to-[#E6E2D6] opacity-60 animate-spin-very-slow"></div>

        <!-- 光之河 (Stream of Light) -->
        <svg class="absolute top-0 left-0 w-full h-full opacity-30" preserveAspectRatio="none" viewBox="0 0 100 100">
            <defs>
                <linearGradient id="globalStreamGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#C5A670; stop-opacity:0" />
                    <stop offset="20%" style="stop-color:#C5A670; stop-opacity:0.2" />
                    <stop offset="50%" style="stop-color:#C5A670; stop-opacity:0.1" />
                    <stop offset="80%" style="stop-color:#C5A670; stop-opacity:0.2" />
                    <stop offset="100%" style="stop-color:#C5A670; stop-opacity:0" />
                </linearGradient>
            </defs>
            <path d="M30,0 C50,20 10,40 30,60 S50,80 30,100" fill="none" stroke="url(#globalStreamGradient)" stroke-width="0.8" vector-effect="non-scaling-stroke" />
            <path d="M70,0 C50,30 90,50 70,70 S50,90 70,100" fill="none" stroke="url(#globalStreamGradient)" stroke-width="0.5" vector-effect="non-scaling-stroke" style="opacity: 0.7;" />
            <path d="M50,0 C60,20 40,50 50,70 S40,100 50,100" fill="none" stroke="url(#globalStreamGradient)" stroke-width="0.2" vector-effect="non-scaling-stroke" style="opacity: 0.4;" />
        </svg>

        <!-- 全域樹影紋理 -->
        <div class="absolute inset-0 w-[120%] h-[120%] opacity-[0.03] animate-sway pointer-events-none mix-blend-darken bg-repeat"
             style="background-image: url('https://www.transparenttextures.com/patterns/shattered-island.png');">
        </div>

        <!-- 空氣感光束 -->
        <div class="absolute -top-[20%] left-[5%] w-[40vw] h-[150vh] bg-gradient-to-b from-white/30 via-white/5 to-transparent -rotate-12 blur-[80px]"></div>
        <div class="absolute -top-[20%] right-[10%] w-[50vw] h-[150vh] bg-gradient-to-b from-[#C5A670]/15 via-[#C5A670]/5 to-transparent rotate-12 blur-[100px]"></div>
    </div>


    <!-- 2. 全域前景層 (Global Foreground Layer) - Z-10 -->
    <!-- 包含落葉、光斑、微塵：位於 Hero 圖片(Z-10)之上 -->
    <!-- 更新：大幅增加數量、提高不透明度與對比度 -->
    <div id="global-fg-layer" class="fixed inset-0 w-full h-full pointer-events-none z-10 overflow-hidden">

        <!-- A. 懸浮微塵與光點 (High Contrast Bokeh) -->
        <!-- 使用 mix-blend-overlay 或 screen 讓亮點在深色背景更明顯 -->
        <div class="absolute top-[15%] left-[25%] w-3 h-3 bg-[#FFD700] rounded-full blur-[2px] animate-float-particle drop-shadow-[0_0_8px_rgba(255,215,0,0.8)] opacity-90"></div>
        <div class="absolute top-[45%] right-[25%] w-2 h-2 bg-white rounded-full blur-[1px] animate-float-particle drop-shadow-[0_0_5px_rgba(255,255,255,0.9)] opacity-90" style="animation-delay: -3s;"></div>
        <div class="absolute bottom-[25%] left-[15%] w-4 h-4 bg-[#C5A670] rounded-full blur-[3px] animate-float-particle drop-shadow-lg opacity-80" style="animation-delay: -5s;"></div>
        <div class="absolute top-[60%] right-[40%] w-2 h-2 bg-[#F3E5AB] rounded-full blur-[1px] animate-float-particle drop-shadow-md opacity-90" style="animation-delay: -2s;"></div>
        
        <!-- 大型光斑 (Soft Bokeh) -->
        <div class="absolute top-[35%] left-[8%] w-48 h-48 bg-[#C5A670]/20 rounded-full blur-[80px] animate-pulse-gold mix-blend-screen" style="animation-duration: 9s;"></div>

        <!-- B. 豐富飄落元素 (Rich Falling Flora) -->
        <!-- 色彩使用高明度的奶白、淺金、淺綠，確保對比度 -->

        <!-- 1. 前景大葉 (Blurry Foreground) -->
        <i class="fa-brands fa-canadian-maple-leaf absolute -top-20 left-[8%] text-[#E8DCC0] text-[10rem] animate-global-float-fast blur-[4px] drop-shadow-xl opacity-90 rotate-12 z-50 hidden md:block" style="animation-duration: 14s;"></i>
        <i class="fa-solid fa-leaf absolute top-[30%] right-[-5%] text-[#F7F5F0] text-[12rem] animate-global-float-fast blur-[5px] drop-shadow-xl opacity-80 -rotate-45 z-50 hidden md:block" style="animation-duration: 18s; animation-delay: -5s;"></i>

        <!-- 2. 中景清晰元素 (Sharp Focus) - 高亮度 -->
        <!-- 左側 -->
        <i class="fa-solid fa-leaf absolute -top-10 left-[20%] text-[#FFFFFF] text-5xl animate-global-float-1 drop-shadow-lg opacity-95"></i>
        <i class="fa-brands fa-envira absolute top-[10%] left-[12%] text-[#FFE4B5] text-6xl animate-global-float-2 drop-shadow-md opacity-90" style="animation-delay: -2s;"></i>
        
        <!-- 中間 -->
        <i class="fa-solid fa-feather absolute -top-32 left-[48%] text-[#F0EAD6] text-7xl animate-global-float-3 drop-shadow-md opacity-90"></i>
        <i class="fa-solid fa-leaf absolute top-[25%] left-[55%] text-[#E6D8B5] text-4xl animate-global-float-1 drop-shadow-sm opacity-85" style="animation-delay: -8s;"></i>

        <!-- 右側 -->
        <i class="fa-brands fa-pagelines absolute -top-5 right-[18%] text-[#FFF] text-8xl animate-global-float-2 drop-shadow-lg opacity-90 hidden md:block" style="animation-duration: 35s;"></i>
        <i class="fa-solid fa-seedling absolute top-[15%] right-[28%] text-[#D4AF37] text-5xl animate-global-float-3 drop-shadow-md opacity-90" style="animation-delay: -4s;"></i>

        <!-- 3. 後景細碎元素 (Background Details) -->
        <i class="fa-solid fa-leaf absolute top-[45%] left-[85%] text-[#C5A670]/40 text-4xl animate-global-float-1 blur-[1px]"></i>
        <i class="fa-regular fa-circle absolute top-[55%] left-[30%] text-white/40 text-2xl animate-global-float-2 blur-[1px]" style="animation-duration: 22s;"></i>
        <i class="fa-solid fa-leaf absolute top-[70%] right-[10%] text-[#F3E5AB]/50 text-5xl animate-global-float-fast blur-[2px]" style="animation-duration: 20s;"></i>
        <i class="fa-solid fa-feather-pointed absolute top-[5%] left-[35%] text-[#E6E2D6]/60 text-5xl animate-global-float-3 blur-[1px]" style="animation-delay: -12s;"></i>
        <i class="fa-solid fa-leaf absolute top-[85%] left-[5%] text-[#FFD700]/30 text-6xl animate-global-float-1 blur-[2px]" style="animation-duration: 40s; animation-delay: -10s;"></i>
        <i class="fa-brands fa-envira absolute top-[65%] right-[55%] text-[#FFFFFF]/30 text-4xl animate-global-float-2 blur-[1px]" style="animation-delay: -15s;"></i>

    </div>


    <!-- 右側懸浮按鈕組 (Floating Action Buttons) -->
    <div class="fixed right-4 bottom-8 z-40 flex flex-col gap-3">
        
        <!-- LINE 按鈕 -->
        <a href="https://line.me/ti/p/@your_line_id" target="_blank" class="w-10 h-10 md:w-12 md:h-12 bg-primary text-white rounded-full flex items-center justify-center shadow-lg hover:bg-accent hover:scale-110 transition duration-300 relative group cursor-pointer">
            <i class="fa-brands fa-line text-lg md:text-2xl"></i>
            <span class="absolute right-full mr-3 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap pointer-events-none">
                加入 LINE
            </span>
        </a>

        <!-- FB 按鈕 -->
        <a href="#" target="_blank" class="w-10 h-10 md:w-12 md:h-12 bg-primary text-white rounded-full flex items-center justify-center shadow-lg hover:bg-accent hover:scale-110 transition duration-300 relative group cursor-pointer">
            <i class="fa-brands fa-facebook-f text-lg md:text-xl"></i>
            <span class="absolute right-full mr-3 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap pointer-events-none">
                關注 Facebook
            </span>
        </a>

        <!-- 回到頂部按鈕 -->
        <a href="#" class="w-10 h-10 md:w-12 md:h-12 bg-primary text-white rounded-full flex items-center justify-center shadow-lg hover:bg-accent hover:scale-110 transition duration-300 relative group cursor-pointer mt-1">
            <i class="fa-solid fa-angle-up text-lg md:text-xl"></i>
            <span class="absolute right-full mr-3 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition whitespace-nowrap pointer-events-none">
                回到頂部
            </span>
        </a>

    </div>

    <!-- 全螢幕選單 Overlay (樣式修正：綠底 + 米點) -->
    <div id="full-screen-menu" class="fixed inset-0 bg-dots-pattern-reversed backdrop-blur-sm z-[100] hidden flex-col transition-opacity duration-300 overflow-y-auto opacity-0">
        <!-- ... (選單內容保持不變) ... -->
        <div class="relative z-10 w-full h-full flex flex-col">
            <div class="flex justify-end p-6">
                <button id="close-menu-btn" class="text-accent hover:text-white transition p-2 cursor-pointer">
                    <i class="fa-solid fa-xmark text-5xl"></i>
                </button>
            </div>
            <div class="flex flex-col px-8 py-4 space-y-0 text-xl font-bold text-accent tracking-widest ml-auto w-full md:w-1/2 lg:w-1/3">
                <a href="#about" class="menu-link block w-full text-right py-6 border-b border-accent/20 hover:text-white transition group cursor-pointer">
                    關於華梵 <i class="fa-solid fa-caret-down text-sm ml-2 group-hover:rotate-180 transition duration-300"></i>
                </a>
                <a href="#services" class="menu-link block w-full text-right py-6 border-b border-accent/20 hover:text-white transition group cursor-pointer">
                    禮儀服務 <i class="fa-solid fa-caret-down text-sm ml-2 group-hover:rotate-180 transition duration-300"></i>
                </a>
                <a href="#" class="menu-link block w-full text-right py-6 border-b border-accent/20 hover:text-white transition group cursor-pointer">
                    私人會館 <i class="fa-solid fa-caret-down text-sm ml-2 group-hover:rotate-180 transition duration-300"></i>
                </a>
                <a href="#calculator" class="menu-link block w-full text-right py-6 border-b border-accent/20 hover:text-white transition group cursor-pointer">
                    費用試算 <i class="fa-solid fa-caret-down text-sm ml-2 group-hover:rotate-180 transition duration-300"></i>
                </a>
                <a href="#obituaries" class="menu-link block w-full text-right py-6 border-b border-accent/20 hover:text-white transition group cursor-pointer">
                    電子訃聞 <i class="fa-solid fa-caret-down text-sm ml-2 group-hover:rotate-180 transition duration-300"></i>
                </a>
                <a href="#" class="menu-link block w-full text-right py-6 border-b border-accent/20 hover:text-white transition group cursor-pointer">
                    聯絡我們 <i class="fa-solid fa-caret-down text-sm ml-2 group-hover:rotate-180 transition duration-300"></i>
                </a>
                <div class="w-full mt-8 pt-8 border-t border-accent/20 relative flex">
                    <input type="text" placeholder="搜尋..." class="w-full p-4 text-primary bg-white focus:outline-none placeholder-primary/50 font-medium">
                    <button class="px-6 bg-accent text-primary hover:bg-white transition duration-300">
                        <i class="fa-solid fa-magnifying-glass text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="fixed w-full top-0 z-50 bg-dots-pattern shadow-md transition-all duration-300" id="navbar">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center relative z-10">
            
           <a href="#" class="flex items-center gap-3 group">
                <picture>
                    <source srcset="image_8286fa.webp" type="image/webp">
                    <img src="image_8286fa.png" alt="華梵禮儀" class="h-12 w-auto object-contain" loading="eager" decoding="async">
                </picture>
                <div class="flex flex-col">
                    <span class="text-xl font-serif font-bold tracking-widest text-primary group-hover:text-accent transition">華梵禮儀</span>
                    <span class="text-[10px] text-accent tracking-[0.2em] uppercase">Hua Fan Etiquette</span>
                </div>
            </a>

            <!-- 電腦版選單 -->
            <nav class="hidden lg:flex items-center gap-8 text-sm font-medium text-gray-600">
                <a href="#about" class="hover:text-primary relative group transition">關於華梵<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-accent transition-all group-hover:w-full"></span></a>
                <a href="#services" class="hover:text-primary relative group transition">服務方案<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-accent transition-all group-hover:w-full"></span></a>
                <a href="#calculator" class="hover:text-primary relative group transition">費用試算<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-accent transition-all group-hover:w-full"></span></a>
                <a href="#obituaries" class="hover:text-primary relative group transition">電子訃聞<span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-accent transition-all group-hover:w-full"></span></a>
            </nav>

            <div class="flex items-center gap-3 md:gap-4 relative z-50">
                <a href="#calculator" class="hidden md:flex items-center gap-2 px-5 py-3 border border-gray-300 rounded-full text-base text-gray-600 hover:border-primary hover:text-primary transition duration-300 bg-white shadow-sm">
                    <i class="fa-solid fa-calculator"></i> 預估費用
                </a>
                
                <!-- 緊急協助按鈕 -->
                <a href="tel:0800-800818" class="flex items-center gap-3 px-4 md:px-6 py-2 bg-emergency text-white rounded-full shadow-red-glow hover:bg-[#8a3e3b] transition animate-attention">
                    <i class="fa-solid fa-phone-volume text-xl md:text-2xl"></i>
                    <div class="flex flex-col items-start leading-none">
                        <span class="text-[9px] md:text-[10px] opacity-90 tracking-widest mb-0.5">24H 專人服務</span>
                        <span class="font-bold tracking-wide text-base md:text-lg font-sans">緊急協助專線</span>
                    </div>
                </a>

                <!-- 手機版漢堡選單按鈕 -->
                <button id="menu-btn" class="lg:hidden text-primary p-2 focus:outline-none ml-1 relative z-[60] cursor-pointer">
                    <i class="fa-solid fa-bars text-3xl"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section (保持原樣，背景已經足夠豐富) -->
    <!-- Modified Hero Section: z-index increased to appear above global ambience -->
    <!-- 注意：Section 設為 z-10，而 #global-fg-layer 設為 z-20，確保前景元素覆蓋在 Hero 圖片之上 -->
    <section class="hero-bg min-h-screen flex flex-col justify-center relative pt-36 pb-32 z-0">
        <!-- ... (Hero Content same as before) ... -->
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full pt-25">
            <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/20 backdrop-blur-md border border-white/30 mb-3 md:mb-6">
                <i class="fa-solid fa-star text-accent text-sm"></i>
                <span class="text-white text-sm font-medium tracking-wider">台中市殯葬評鑑特優．人文關懷獎</span>
            </div>
            <h1 class="text-white text-5xl md:text-7xl font-serif font-bold leading-tight mb-6 text-shadow-lg animate-fade-in-up" style="animation-delay: 0.1s;">
                真心。真意。<br>
                <span class="text-accent italic relative inline-block">
                    安心託付。
                    <span class="absolute -bottom-2 left-0 w-full h-3 bg-accent/30 -skew-x-12"></span>
                </span>
            </h1>
            <p class="text-white/90 text-lg md:text-xl font-light mb-12 leading-relaxed max-w-lg border-l-4 border-accent pl-6 ml-2 animate-fade-in-up" style="animation-delay: 0.2s;">
                生命的終點不是結束，而是另一段旅程的開始。<br>
                華梵以溫暖專業，守護您最珍貴的回憶。
            </p>
            <div class="flex flex-col md:flex-row gap-6 max-w-4xl animate-fade-in-up" style="animation-delay: 0.4s;">
                <a href="我剛失去親人.html" class="group block bg-surface/95 backdrop-blur-sm p-8 pl-10 rounded-2xl shadow-soft flex-1 hover:-translate-y-2 transition duration-500 cursor-pointer gold-border-left overflow-hidden relative">
                    <div class="absolute right-[-20px] top-[-20px] text-gray-100 text-9xl opacity-20 group-hover:scale-110 transition duration-700 font-serif">心</div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="bg-warm w-14 h-14 rounded-full flex items-center justify-center text-accent text-2xl group-hover:bg-accent group-hover:text-white transition-colors duration-300 shadow-inner">
                                <i class="fa-solid fa-heart-crack"></i>
                            </div>
                            <h3 class="text-2xl font-serif font-bold text-primaryDark">我剛失去親人...</h3>
                        </div>
                        <p class="text-gray-500 text-sm leading-relaxed mb-2">如果不確定該做什麼，請讓我們引導您完成第一步。</p>
                        <div class="flex items-center text-accent font-bold text-sm gap-2 group-hover:gap-4 transition-all">
                            立即協助 <i class="fa-solid fa-arrow-right-long"></i>
                        </div>
                    </div>
                </a>
                <a href="preneed.html" class="group block bg-surface/95 backdrop-blur-sm p-8 pl-10 rounded-2xl shadow-soft flex-1 hover:-translate-y-2 transition duration-500 cursor-pointer gold-border-left overflow-hidden relative">
                    <div class="absolute right-[-20px] top-[-20px] text-gray-100 text-9xl opacity-20 group-hover:scale-110 transition duration-700 font-serif">願</div>
                    <div class="relative z-10">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="bg-warm w-14 h-14 rounded-full flex items-center justify-center text-primary text-2xl group-hover:bg-primary group-hover:text-white transition-colors duration-300 shadow-inner">
                                <i class="fa-solid fa-clipboard-list"></i>
                            </div>
                            <h3 class="text-2xl font-serif font-bold text-primaryDark">預先規劃未來</h3>
                        </div>
                        <p class="text-gray-500 text-sm leading-relaxed mb-2">了解禮儀服務流程、費用行情，為自己與家人提前安排。</p>
                        <div class="flex items-center text-primary font-bold text-sm gap-2 group-hover:gap-4 transition-all">
                            了解方案 <i class="fa-solid fa-arrow-right-long"></i>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div class="absolute bottom-0 w-full h-24 bg-gradient-to-t from-warm to-transparent"></div>
    </section>

    <!-- Tabbed Section (Modified for Transparency) -->
    <!-- 移除 bg-warm，改為 relative z-10 讓背景透出 -->
    <section class="pt-12 pb-32 relative z-10" id="trust-tabs">
        <div class="container mx-auto px-4 relative z-10">
            <!-- Navigation -->
            <div class="grid grid-cols-3 gap-2 w-full md:flex md:w-auto md:gap-8 md:justify-center mb-4 border-b-0 md:border-b border-gray-200/50 pb-2 md:pb-0">
                <button class="tab-btn group md:px-6 md:py-4 md:rounded-t-lg transition-all duration-300 active" id="btn-awards" onclick="switchTab('awards')">
                    <div class="flex md:flex-row items-center justify-center gap-1 md:gap-3">
                    <i class="fa-solid fa-certificate"></i>
                    <span class="tab-text tracking-widest font-bold">評鑑優良</span>
                    </div>
                    <span class="text-xs mt-1 opacity-70 mobile-hide-text">接連 7 屆臺中市政府評鑑優良</span>
                </button>
                <div class="hidden md:block w-px h-10 bg-gray-300"></div>
                <button class="tab-btn group md:px-6 md:py-4 md:rounded-t-lg transition-all duration-300 hover:bg-white/50" id="btn-pricing" onclick="switchTab('pricing')">
                    <div class="flex md:flex-row items-center justify-center gap-1 md:gap-3">
                    <i class="fa-solid fa-file-contract"></i>
                    <span class="tab-text tracking-widest font-bold">價格透明</span>
                    </div>
                    <span class="text-xs mt-1 opacity-70 mobile-hide-text">契約公開．合約履約保證</span>
                </button>
                <div class="hidden md:block w-px h-10 bg-gray-300"></div>
                <button class="tab-btn group md:px-6 md:py-4 md:rounded-t-lg transition-all duration-300 hover:bg-white/50" id="btn-team" onclick="switchTab('team')">
                    <div class="flex md:flex-row items-center justify-center gap-1 md:gap-3">
                    <i class="fa-solid fa-users"></i>
                    <span class="tab-text tracking-widest font-bold">專業團隊</span>
                    </div>
                    <span class="text-xs mt-1 opacity-70 mobile-hide-text">國家級證照禮儀師服務</span>
                </button>
            </div>

            <!-- Content Area (Transparent Background) -->
            <!-- 增加 backdrop-blur-sm, bg-warm/30 讓內容在浮水印上仍清晰 -->
            <div class="tab-content w-full relative min-h-[500px] mt-2 md:mt-8 bg-warm/60 backdrop-blur-sm rounded-3xl overflow-hidden border border-white/40 shadow-sm" id="content-awards">
                
                <!-- 卡片背景層 (Specific to Awards Tab) -->
                <div id="award-bg-114" class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 pointer-events-none mix-blend-multiply opacity-0 z-0" style="background-image: url('114評鑑（浮水印）.png');"></div>
                <div id="award-bg-111" class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 pointer-events-none mix-blend-multiply opacity-0 z-0" style="background-image: url('111評鑑.png');"></div>
                <div id="award-bg-107" class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 pointer-events-none mix-blend-multiply opacity-0 z-0" style="background-image: url('107評鑑.JPG');"></div>
                <div id="award-bg-103" class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 pointer-events-none mix-blend-multiply opacity-0 z-0" style="background-image: url('103評鑑.JPG');"></div>

                <!-- Timeline Content -->
                <div class="w-full relative z-10">
                    <div id="timeline-container" class="flex overflow-x-auto pb-20 snap-x snap-mandatory scrollbar-hide px-4 md:px-0 gap-0 pt-32">

                        <!-- ... (Timeline items with same structure, updated interactions) ... -->
                        <!-- 114年 -->
			<div class="award-card min-w-[340px] md:min-w-[420px] flex flex-col items-center snap-center relative group px-4" data-bg-id="114">

                            <div class="absolute top-5 right-0 w-1/2 h-1.5 bg-gradient-to-r from-[#d4af37] to-[#C5A670] z-0 rounded-l-full"></div>
                            <div class="absolute -top-24 left-1/2 -translate-x-1/2 flex flex-col items-center w-max z-20">
                                <div class="text-accent font-extrabold tracking-widest text-2xl drop-shadow-sm">民國 114 年</div>
                                <div class="text-[10px] text-white font-bold tracking-wider mt-1 bg-[#d4af37] px-3 py-1 rounded-full shadow-sm">最新年度評鑑</div>
                            </div>
                            <div class="relative z-10 w-16 h-16 -mt-3 rounded-full bg-gradient-to-br from-accent to-[#d4af37] text-white flex items-center justify-center border-4 border-white shadow-glow scale-110 group-hover:scale-125 transition duration-500 animate-pulse-gold">
                                    <i class="fa-solid fa-trophy text-2xl"></i>
                            </div>
                            <div class="mt-14 w-full bg-gradient-to-br from-[#FFFBF0] to-white p-6 rounded-2xl shadow-gold border-2 border-accent/40 relative hover:-translate-y-2 transition duration-500 group-hover:shadow-gold-lg h-full flex flex-col cursor-pointer"
                                 onmouseenter="setAwardsBg('114')"
                                 onmouseleave="resetAwardsBg()"
                                 onclick="openImageModal('114評鑑.jpg', '民國 114 年 - 評鑑特優')">
                                <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-primary to-secondary text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-lg tracking-wider whitespace-nowrap z-20 flex items-center gap-1">
                                    <i class="fa-solid fa-crown text-yellow-400"></i> 年度評鑑大滿貫
                                </div>
                                <div class="text-center mb-4 mt-2">
                                    <h3 class="text-3xl font-serif font-bold text-primary mb-1">評鑑特優</h3>
                                    <p class="text-accent font-bold text-base">華梵禮儀 & <span class="text-xs text-accent/60 align-text-middle">子公司</span>青山禮儀</p>
                                    <p class="text-gray-400 text-xs mt-1">雙雙入選．集團榮耀</p>
                                </div>
                                <div class="border-t border-accent/20 my-3"></div>
                                <p class="text-gray-600 text-sm font-bold mb-3 text-center">榮獲三大特殊榮譽獎項</p>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-2 w-full">
                                    <span class="w-full px-2 py-2 bg-white border border-accent/30 rounded-lg text-sm text-primary font-bold shadow-sm flex items-center justify-center gap-2 hover:bg-accent hover:text-white transition group/tag cursor-default">
                                        <i class="fa-solid fa-venus-mars text-accent group-hover/tag:text-white"></i> 性別平等
                                    </span>
                                    <span class="w-full px-2 py-2 bg-white border border-accent/30 rounded-lg text-sm text-primary font-bold shadow-sm flex items-center justify-center gap-2 hover:bg-accent hover:text-white transition group/tag cursor-default">
                                        <i class="fa-solid fa-leaf text-accent group-hover/tag:text-white"></i> 環保永續
                                    </span>
                                    <span class="w-full px-2 py-2 bg-white border border-accent/30 rounded-lg text-sm text-primary font-bold shadow-sm flex items-center justify-center gap-2 hover:bg-accent hover:text-white transition group/tag cursor-default">
                                        <i class="fa-solid fa-lightbulb text-accent group-hover/tag:text-white"></i> 創新服務
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- 111年 -->
			<div class="award-card min-w-[320px] md:min-w-[400px] flex flex-col items-center snap-center relative group px-4" data-bg-id="111">                            <div class="absolute top-5 left-0 w-full h-1.5 bg-[#C5A670] -z-10"></div>
                            <div class="absolute top-[-12px] left-0 translate-x-[-50%] bg-gradient-to-r from-[#d4af37] to-[#C5A670] text-white text-[10px] font-bold px-3 py-1 rounded-full shadow-md z-20 whitespace-nowrap border border-white flex items-center gap-1">
                                <i class="fa-solid fa-link"></i> 蟬聯殊榮
                            </div>
                            <div class="absolute -top-20 left-1/2 -translate-x-1/2 flex flex-col items-center w-max z-20">
                                <div class="text-accent font-bold tracking-widest text-lg">民國 111 年</div>
                                <div class="text-[10px] text-gray-500 mt-1 font-medium bg-white/80 backdrop-blur px-2 py-0.5 rounded shadow-sm">新制實施後第二屆</div>
                            </div>
                            <div class="relative z-10 w-12 h-12 -mt-1 rounded-full bg-white text-[#B48484] flex items-center justify-center border-4 border-white shadow-xl group-hover:scale-110 transition duration-300 ring-2 ring-[#E0Dcd9]">
                                    <i class="fa-solid fa-hand-holding-heart text-lg"></i>
                            </div>
                            <div class="mt-16 w-full bg-white p-6 rounded-2xl shadow-soft border-t-4 border-[#C08484] relative hover:-translate-y-2 transition duration-500 group-hover:shadow-rose-glow h-full flex flex-col justify-center cursor-pointer"
                                 onmouseenter="setAwardsBg('111')"
                                 onmouseleave="resetAwardsBg()"
                                 onclick="openImageModal('111評鑑.png', '民國 111 年 - 人文關懷獎')">
                                <div class="absolute inset-0 rounded-2xl overflow-hidden pointer-events-none">
                                     <i class="fa-solid fa-heart absolute -right-4 -bottom-4 text-8xl text-[#C08484]/5 rotate-12"></i>
                                </div>
                                <div class="absolute -top-3 left-1/2 -translate-x-1/2 bg-[#C08484] text-white text-xs px-3 py-1 rounded-full shadow-md font-bold tracking-wide flex items-center gap-1 w-max z-20">
                                    <i class="fa-solid fa-medal"></i> 台中首創
                                </div>
                                <h3 class="text-xl font-serif font-bold text-gray-700 mb-1 text-center mt-2 relative z-10">人文關懷獎</h3>
                                <div class="w-12 h-0.5 bg-[#E0Dcd9] mx-auto mb-3"></div>
                                <p class="text-gray-500 text-sm leading-relaxed text-center relative z-10">
                                    <span class="block text-xs text-gray-400 mb-1">臺中市殯葬禮儀服務業評鑑</span>
                                    <span class="text-[#B48484] font-bold">全台中市第一家</span><br>
                                    獲得此殊榮之殯葬業者
                                </p>
                            </div>
                        </div>


                        <!-- 107年 -->
			<div class="award-card min-w-[280px] md:min-w-[320px] flex flex-col items-center snap-center relative group px-4" data-bg-id="107">                            <div class="absolute top-5 left-0 w-1/2 h-1.5 bg-[#C5A670] -z-10 rounded-r-full"></div>
                            
                            <!-- 修改：右側連接線改為統一格式的金色虛線，延伸至容器邊緣 -->
                            <div class="absolute top-5 right-0 w-1/2 h-0.5 -z-10" 
                                 style="background-image: linear-gradient(to right, #C5A670 50%, transparent 0%); background-size: 10px 100%; background-repeat: repeat-x;">
                            </div>

                            <div class="relative z-10 w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center border-4 border-white shadow-md group-hover:bg-accent transition duration-300">
                                <i class="fa-solid fa-scale-balanced text-sm"></i>
                            </div>
                            <div class="absolute top-[-35px] left-1/2 -translate-x-1/2 bg-primary text-white text-[10px] font-bold px-3 py-1.5 rounded-full whitespace-nowrap shadow-lg arrow-bottom animate-bounce flex items-center gap-1">
                                <i class="fa-solid fa-gavel"></i> 評鑑改制：三年一評
                            </div>
                            <div class="mt-5 text-gray-500 font-bold tracking-widest group-hover:text-primary transition">民國 107 年</div>
                            <div class="mt-6 w-full bg-white p-6 rounded-xl shadow-soft border-t-4 border-primary hover:bg-warm/50 transition duration-300 hover:-translate-y-1 h-full relative flex flex-col justify-center items-center cursor-pointer"
                                 onmouseenter="setAwardsBg('107')"
                                 onmouseleave="resetAwardsBg()"
                                 onclick="openImageModal('107評鑑.JPG', '民國 107 年 - 評鑑優等 (新制首屆)')">
                                <h4 class="text-lg font-bold text-gray-700 text-center mb-1">評鑑優等</h4>
                                <div class="w-8 h-0.5 bg-gray-200 mb-3"></div>
                                <p class="text-xs text-gray-400 text-center leading-relaxed">
                                    <span class="inline-block bg-primary/10 text-primary px-2 py-0.5 rounded mb-1 font-bold">新制首屆</span><br>
                                    面對更嚴格的標準<br>
                                    華梵即獲優等肯定
                                </p>
                            </div>
                        </div>


                        <!-- 榮耀傳承 (99-105年) -->
                        <div class="award-card min-w-[260px] md:min-w-[300px] flex flex-col items-center snap-center relative group px-4 opacity-70 hover:opacity-100 transition duration-500 grayscale hover:grayscale-0" data-bg-id="103">
                            
                            <!-- 修改：貫穿全寬的金色虛線，左接107，右接按鈕 -->
                            <div class="absolute top-5 left-0 w-full h-0.5 -z-10" 
                                 style="background-image: linear-gradient(to right, #C5A670 50%, transparent 0%); background-size: 10px 100%; background-repeat: repeat-x;">
                            </div>

                            <div class="relative z-10 w-8 h-8 rounded-full bg-pale text-primary/60 flex items-center justify-center border-2 border-white shadow-sm group-hover:scale-110 transition duration-300">
                                <i class="fa-solid fa-clock-rotate-left text-[10px]"></i>
                            </div>
                            <div class="mt-6 text-primary/40 font-bold tracking-widest text-primary group-hover:text-primary transition">民國 105 - 99 年</div>
                            <div class="mt-6 w-full bg-white/60 p-5 rounded-xl shadow-sm border border-white/50 hover:bg-white transition duration-300 hover:-translate-y-1 h-full flex flex-col justify-center items-center cursor-pointer"
                                 onmouseenter="setAwardsBg('103')"
                                 onmouseleave="resetAwardsBg()"
                                 onclick="openImageModal('103評鑑.JPG', '多年評鑑最高等第')">


                                <h4 class="text-base font-bold text-primary/60 mb-2">榮耀傳承</h4>
                                <div class="w-8 h-0.5 bg-gray-200 mb-2"></div>
                                <p class="text-xs text-gray-400 leading-relaxed">
                                    連續多年榮獲<br>
                                    <span class="font-bold text-primary/70">評鑑優等 & 示範單位</span><br>
                                    奠定專業服務基石
                                </p>
                            </div>
                        </div>

                        <!-- 探索更多 (引導按鈕 - 上移至箭頭與虛線水平對齊) -->
                        <div class="min-w-[200px] flex flex-col items-center justify-start snap-center px-4 relative pt-0">
                             
                             <!-- 左側水平虛線 (接續上一個節點) -->
                             <!-- 維持在 top-5 (1.25rem = 20px) 的高度 -->
                             <div class="absolute top-5 left-0 w-1/2 h-0.5 -z-10" 
                                  style="background-image: linear-gradient(to right, #C5A670 50%, transparent 0%); background-size: 10px 100%; background-repeat: repeat-x;">
                             </div>

                             <!-- 垂直連接虛線 (向下延伸至按鈕) -->
                             <!-- 修改：縮短垂直線，甚至如果完全水平對齊，可能不需要垂直線，或者垂直線只是一點點 -->
                             <!-- 假設我们要讓箭頭中心對齊虛線：箭頭中心在按鈕中心。按鈕是 h-16 (64px)。中心在 32px 處。 -->
                             <!-- 虛線在 top-5 (20px)。 -->
                             <!-- 所以按鈕頂部需要在 20px - 32px = -12px 的位置。 -->
                             <!-- 我們設定按鈕的 mt 為 -3 (約 -12px) 或透過 transform -translate-y -->
                             
                             <!-- 按鈕本體 -->
                             <!-- 設定 -mt-3 (負 margin) 讓按鈕上移，使箭頭中心接近 top-5 的虛線高度 -->
                             <a href="#about" class="group flex flex-col items-center gap-3 p-2 rounded-2xl transition duration-300 cursor-pointer -mt-5">
                                <!-- 外圈光暈 -->
                                <div class="absolute inset-0 bg-accent/5 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition duration-500"></div>
                                
                                <div class="relative w-16 h-16 rounded-full border-2 border-dashed border-accent/40 flex items-center justify-center text-accent bg-white/50 group-hover:bg-accent group-hover:text-white group-hover:border-solid group-hover:scale-110 transition-all duration-300 shadow-sm group-hover:shadow-gold">
                                    <i class="fa-solid fa-arrow-right-long text-xl group-hover:translate-x-1 transition"></i>
                                </div>
                                
                                <div class="text-center relative z-10">
                                    <span class="block text-primary font-bold text-sm tracking-wider mb-0.5 group-hover:text-accent transition duration-300">深入認識華梵</span>
                                    <span class="block text-[10px] text-gray-400 group-hover:text-primary/60 transition">了解我們的服務理念</span>
                                </div>
                             </a>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Pricing & Team Sections (Keeping content logic) -->

<!-- CONTENT 2: Pricing (Mobile-Optimized with Scroll Tracking) -->
<div class="tab-content w-full hidden-content" id="content-pricing">
    <!-- Container with warm background -->
    <div class="flex flex-col gap-8">
        <!-- Main Hero Card with Dynamic Backgrounds -->
        <div class="bg-gradient-to-br from-[#FFFBF0] to-white rounded-[2.5rem] shadow-xl p-8 md:p-12 border border-stone-100 relative overflow-hidden transition-all duration-500" id="pricing-main-card">
            
            <!-- Dynamic Background Layers (Watermarks) -->
            <!-- Image 1: Contract -->
            <div class="absolute inset-0 bg-cover bg-center transition-opacity duration-700 pointer-events-none mix-blend-multiply opacity-[0.15]" id="bg-contract" style="background-image: url('https://images.unsplash.com/photo-1450101499163-c8848c66ca85?q=80&w=2070&auto=format&fit=crop');"></div>
            
            <!-- Image 2: Pricing -->
            <div class="absolute inset-0 bg-cover bg-center opacity-0 transition-opacity duration-700 pointer-events-none mix-blend-multiply" id="bg-pricing" style="background-image: url('https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?q=80&w=2000&auto=format&fit=crop');"></div>
            
            <!-- Image 3: No Red Envelope -->
            <div class="absolute inset-0 bg-cover bg-center opacity-0 transition-opacity duration-700 pointer-events-none mix-blend-multiply" id="bg-nored" style="background-image: url('https://images.unsplash.com/photo-1521737711867-e3b97375f902?q=80&w=2000&auto=format&fit=crop');"></div>

            <!-- Decorative Background Element (Organic Blob) - Always visible but behind watermarks -->
            <div class="absolute -top-20 -right-20 w-80 h-80 bg-accent/10 rounded-full blur-[80px] pointer-events-none z-0"></div>
            <div class="absolute bottom-0 left-0 w-full h-32 bg-gradient-to-t from-white via-white/80 to-transparent pointer-events-none md:hidden z-20"></div>

            <div class="text-center max-w-3xl mx-auto mb-8 md:mb-12 relative z-20">
                <div class="inline-block px-4 py-1 rounded-full bg-accent/10 text-accent text-xs font-bold tracking-widest mb-4">OUR PROMISE</div>
                <h3 class="text-2xl md:text-4xl font-serif font-bold text-primary mb-4 leading-tight">不只是一份契約<br class="md:hidden">更是一份<span class="text-accent relative inline-block">安心的託付<span class="absolute bottom-1 left-0 w-full h-2 bg-accent/20 -z-10"></span></span></h3>
                <p class="text-gray-500 text-sm md:text-base leading-relaxed">
                    治喪期間的慌亂與不安，我們感同身受。<br class="hidden md:block">
                    華梵禮儀堅持「公開、透明、誠信」，讓您在最脆弱的時刻，擁有最堅實的依靠。
                </p>
            </div>

            <!-- 3 Features Grid with ID for IntersectionObserver -->
            <div class="relative z-20 -mx-8 md:mx-0 px-8 md:px-0 overflow-visible">
                <div class="flex md:grid md:grid-cols-3 gap-4 md:gap-8 overflow-x-auto snap-x snap-mandatory pb-8 md:pb-0 scrollbar-hide" id="pricing-features-scroll">
                    
                    <!-- Feature 1: Contract -->
                    <div class="pricing-feature-card min-w-[85%] md:min-w-0 snap-center bg-white rounded-3xl p-6 md:p-8 text-center border border-gray-100 shadow-sm hover:shadow-gold hover:-translate-y-1 transition duration-500 group relative overflow-hidden cursor-default" 
                         data-bg-id="contract" onmouseenter="setPricingBg('contract')">
                        <div class="absolute top-0 left-0 w-full h-1 bg-accent scale-x-0 group-hover:scale-x-100 transition duration-500 origin-left z-20"></div>
                        <div class="relative z-10">
                            <div class="w-16 h-16 mx-auto bg-[#F7F5F0] rounded-full flex items-center justify-center shadow-inner mb-6 group-hover:scale-110 transition duration-300">
                                <i class="fa-solid fa-file-contract text-2xl text-primary/80 group-hover:text-accent transition"></i>
                            </div>
                            <h4 class="text-lg font-bold text-primaryDark mb-3">定型化契約</h4>
                            <p class="text-sm text-gray-500 leading-relaxed">完全符合內政部規範，條款清晰，保障雙方權益，絕無模糊地帶。</p>
                        </div>
                    </div>

                    <!-- Feature 2: Pricing -->
                    <div class="pricing-feature-card min-w-[85%] md:min-w-0 snap-center bg-white rounded-3xl p-6 md:p-8 text-center border border-gray-100 shadow-sm hover:shadow-gold hover:-translate-y-1 transition duration-500 group relative overflow-hidden cursor-default" 
                         data-bg-id="pricing" onmouseenter="setPricingBg('pricing')">
                         <div class="absolute top-0 left-0 w-full h-1 bg-accent scale-x-0 group-hover:scale-x-100 transition duration-500 origin-left z-20"></div>
                        <div class="relative z-10">
                            <div class="w-16 h-16 mx-auto bg-[#F7F5F0] rounded-full flex items-center justify-center shadow-inner mb-6 group-hover:scale-110 transition duration-300">
                                <i class="fa-solid fa-magnifying-glass-dollar text-2xl text-primary/80 group-hover:text-accent transition"></i>
                            </div>
                            <h4 class="text-lg font-bold text-primaryDark mb-3">價格公開透明</h4>
                            <p class="text-sm text-gray-500 leading-relaxed">網站詳列服務項目與價格，每一分花費都看得到，絕無隱藏追加費用。</p>
                        </div>
                    </div>

                    <!-- Feature 3: No Red Envelope -->
                    <div class="pricing-feature-card min-w-[85%] md:min-w-0 snap-center bg-white rounded-3xl p-6 md:p-8 text-center border border-gray-100 shadow-sm hover:shadow-gold hover:-translate-y-1 transition duration-500 group relative overflow-hidden cursor-default" 
                         data-bg-id="nored" onmouseenter="setPricingBg('nored')">
                         <div class="absolute top-0 left-0 w-full h-1 bg-accent scale-x-0 group-hover:scale-x-100 transition duration-500 origin-left z-20"></div>
                        <div class="relative z-10">
                            <div class="w-16 h-16 mx-auto bg-[#F7F5F0] rounded-full flex items-center justify-center shadow-inner mb-6 group-hover:scale-110 transition duration-300">
                                <i class="fa-solid fa-ban text-2xl text-emergency/80 group-hover:text-emergency transition"></i>
                            </div>
                            <h4 class="text-lg font-bold text-primaryDark mb-3">嚴禁收受紅包</h4>
                            <p class="text-sm text-gray-500 leading-relaxed">這是我們的職業道德底線。任何服務人員絕不會向家屬索取額外紅包。</p>
                        </div>
                    </div>

                </div>
                
                <!-- Mobile Swipe Indicator (with IDs for JS update) -->
                <div class="flex justify-center gap-2 mt-4 md:hidden">
                    <div class="w-2 h-2 rounded-full bg-accent transition-colors duration-300" id="dot-contract"></div>
                    <div class="w-2 h-2 rounded-full bg-gray-300 transition-colors duration-300" id="dot-pricing"></div>
                    <div class="w-2 h-2 rounded-full bg-gray-300 transition-colors duration-300" id="dot-nored"></div>
                </div>
            </div>

            <!-- Action Area -->
            <div class="mt-10 md:mt-14 flex justify-center relative z-20">
                <a href="#calculator" class="group relative inline-flex items-center justify-center gap-3 px-10 py-4 bg-primary text-white rounded-full font-bold text-lg shadow-lg hover:bg-accent hover:shadow-gold transition-all duration-300 overflow-hidden transform hover:-translate-y-1">
                    <span class="relative z-10">立即試算費用</span>
                    <i class="fa-solid fa-calculator relative z-10 group-hover:rotate-12 transition"></i>
                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition duration-500"></div>
                </a>
            </div>

        </div>
    </div>
</div>



<!-- CONTENT 3: Team (REDESIGNED - INFINITE SCROLL CAROUSEL + REVERSED MOBILE LAYOUT) -->
<!-- 這裡已替換為附檔一的內容 -->
<div class="tab-content w-full px-4 md:px-12 py-8 hidden-content" id="content-team">
    <!-- Main Green Container (The Fortress) with Flex Layout -->
    <!-- flex-col-reverse for Mobile (Cards Top, Text Bottom) -->
    <!-- lg:flex-row for Desktop (Text Left, Cards Right) -->
    <div class="w-full bg-primaryDark rounded-[2.5rem] p-8 lg:p-16 flex flex-col-reverse lg:flex-row gap-12 items-center relative overflow-hidden group shadow-2xl min-h-[500px]">
        
        <!-- Background Elements -->
        <div class="absolute top-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl translate-x-1/3 -translate-y-1/3 pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>
        <!-- Decorative Icon -->
        <i class="fa-solid fa-user-tie absolute -bottom-12 -left-12 text-[15rem] text-white/5 group-hover:text-white/10 group-hover:rotate-12 transition duration-1000 ease-out pointer-events-none"></i>
			<div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                        <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-accent/20 rounded-full blur-2xl group-hover:bg-accent/30 transition duration-700"></div>


        <!-- LEFT SIDE: Text Content (Desktop: Left / Mobile: Bottom) -->
        <div class="w-full lg:w-5/12 relative z-10 text-center lg:text-left">
            <div class="inline-block border border-accent/30 rounded-full px-3 py-1 text-accent text-xs font-bold tracking-[0.2em] mb-6 uppercase backdrop-blur-sm">Professional Team</div>
            
            <h3 class="text-3xl md:text-4xl font-serif font-bold mb-6 leading-tight text-white">專業，<br>是給您最堅實的<br><span class="text-accent relative inline-block">溫柔倚靠<span class="absolute bottom-1 left-0 w-full h-2 bg-accent/20 -z-10"></span></span>。</h3>
            
            <div class="flex items-baseline gap-2 mb-4 justify-center lg:justify-start">
                <span class="text-6xl md:text-7xl font-bold text-accent tracking-tighter" style="text-shadow: 0 4px 12px rgba(197, 166, 112, 0.3);">100</span>
                <span class="text-2xl font-medium text-white/80">%</span>
            </div>
            <p class="text-gray-400 text-sm font-light tracking-wide border-l-0 lg:border-l-2 border-accent pl-0 lg:pl-4 mt-2">
                團隊成員皆具備<br>國家級禮儀師或技術士證照
            </p>
        </div>

        <!-- RIGHT SIDE: Infinite Carousel (Desktop: Right / Mobile: Top) -->
        <div class="w-full lg:w-7/12 relative overflow-hidden mask-gradient-x">
            
             <!-- Instructions -->
            <div class="text-center text-white/40 text-xs tracking-widest uppercase mb-4 lg:mb-6">
                 專業證照展示
            </div>

            <!-- The Carousel Container -->
            <!-- We use two sets of cards for the infinite loop illusion -->
            <div class="flex gap-6 animate-scroll w-max hover:pause py-4">
                
                <!-- Set 1 -->
                <!-- Card 1 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                     <picture>
                         <source srcset="禮儀師證書-副總.webp" type="image/webp">
                         <img src="禮儀師證書-副總.png" class="w-full h-full object-cover rounded-xl border border-gray-200" alt="禮儀師證書" loading="lazy" decoding="async">
                     </picture>
                </div>
                <!-- Card 2 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                    <picture>
                        <source srcset="禮儀師證書-小賴.webp" type="image/webp">
                        <img src="禮儀師證書-小賴.png" alt="乙級技術士證書" loading="lazy" decoding="async">
                    </picture>
                </div>
                <!-- Card 3 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                     <picture>
                         <source srcset="禮儀師證書-怡傑.webp" type="image/webp">
                         <img src="禮儀師證書-怡傑.png" alt="丙級技術士證書" loading="lazy" decoding="async">
                     </picture>
                </div>
                <!-- Card 4 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                     <picture>
                         <source srcset="禮儀師證書-昭儀.webp" type="image/webp">
                         <img src="禮儀師證書-昭儀.png" alt="悲傷輔導證書" loading="lazy" decoding="async">
                     </picture>
                </div>



                <!-- Set 2 (Duplicate for Loop) -->
                <!-- Card 1 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                     <picture>
                         <source srcset="禮儀師證書-副總.webp" type="image/webp">
                         <img src="禮儀師證書-副總.png" class="w-full h-full object-cover rounded-xl border border-gray-200" alt="禮儀師證書" loading="lazy" decoding="async">
                     </picture>
                </div>
                <!-- Card 2 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                    <picture>
                        <source srcset="禮儀師證書-小賴.webp" type="image/webp">
                        <img src="禮儀師證書-小賴.png" alt="乙級技術士證書" loading="lazy" decoding="async">
                    </picture>
                </div>
                <!-- Card 3 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                     <picture>
                         <source srcset="禮儀師證書-怡傑.webp" type="image/webp">
                         <img src="禮儀師證書-怡傑.png" alt="丙級技術士證書" loading="lazy" decoding="async">
                     </picture>
                </div>
                <!-- Card 4 -->
                <div class="w-64 md:w-72 aspect-[3/4] bg-white rounded-2xl p-2 shadow-xl border-4 border-white/10 overflow-hidden transform hover:scale-105 transition duration-300">
                     <picture>
                         <source srcset="禮儀師證書-昭儀.webp" type="image/webp">
                         <img src="禮儀師證書-昭儀.png" alt="悲傷輔導證書" loading="lazy" decoding="async">
                     </picture>
                </div>

            </div>
        </div>

    </div>
</div>
</div>
</div>


	<!-- 修改顏色為透明度漸層，融入全域背景 -->
        <div class="absolute bottom-0 left-0 w-full overflow-hidden leading-none rotate-180 opacity-90">
            <svg class="relative block w-[calc(100%+1.3px)] h-[60px] text-[#EBEDE9]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#EBEDE9"></path>
            </svg>
        </div>

    </section>


    <!-- Services (Transparency Applied) -->
    <!-- 移除 bg-[#EBEDE9]，改用全域背景 + 半透明卡片 -->
    <section id="services" class="py-8 relative z-10 bg-[#EBEDE9]/90">
        <!-- SVG Separator (Optional: Make it transparent or subtle) -->

        <div class="container mx-auto px-6 relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
                <div>
                    <h2 class="text-3xl md:text-5xl font-serif font-bold text-primaryDark">多元化禮儀服務</h2>
                    <p class="text-gray-600 mt-4 max-w-lg">尊重每一種信仰與價值觀。從傳統到現代，從莊嚴到溫馨。</p>
                </div>
                <a href="#" class="px-6 py-2 border-2 border-primary/20 text-primary rounded-full hover:bg-primary hover:text-white transition flex items-center gap-2 group backdrop-blur-sm bg-white/30">
                    查看所有方案 <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition"></i>
                </a>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="group relative">
                    <div class="overflow-hidden rounded-[2rem] shadow-soft bg-white/70 backdrop-blur-md h-full hover:-translate-y-2 transition duration-500 border border-white/50">
                        <div class="h-64 relative overflow-hidden">
                            <picture>
                                <source srcset="b.webp" type="image/webp">
                                <img style="aspect-ratio: 4/3" src="b.png">
                            </picture>
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-60 group-hover:opacity-40 transition"></div>
                            <span class="absolute bottom-4 left-6 text-white text-xs tracking-widest uppercase border border-white/30 px-2 py-1 rounded backdrop-blur-sm">Traditional</span>
                        </div>
                        <div class="p-8">
                            <h3 class="text-2xl font-serif font-bold text-primaryDark mb-3">中式傳統禮儀</h3>
                            <p class="text-gray-500 text-sm leading-relaxed mb-6">遵循古禮，莊嚴誦經。引導家屬為逝者積福報，圓滿功德，讓孝思流傳。</p>
                            <span class="inline-block w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:bg-primary group-hover:text-white transition">
                                <i class="fa-solid fa-arrow-right text-sm"></i>
                            </span>
                        </div>
                    </div>
                </div>
                <!-- Card 2 & 3 (Same structure) -->
                <div class="group relative md:-mt-8">
                    <div class="overflow-hidden rounded-[2rem] shadow-soft bg-white/70 backdrop-blur-md h-full hover:-translate-y-2 transition duration-500 border border-white/50">
                        <div class="h-64 relative overflow-hidden">
                            <picture>
                                <source srcset="西式.webp" type="image/webp">
                                <img style="aspect-ratio: 4/3" src="西式.jpg">
                            </picture>
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-60 group-hover:opacity-40 transition"></div>
                            <span class="absolute bottom-4 left-6 text-white text-xs tracking-widest uppercase border border-white/30 px-2 py-1 rounded backdrop-blur-sm">Western</span>
                        </div>
                        <div class="p-8">
                            <h3 class="text-2xl font-serif font-bold text-primaryDark mb-3">西式/基督教</h3>
                            <p class="text-gray-500 text-sm leading-relaxed mb-6">溫馨感人的追思禮拜。尊重教義，佈置典雅，用詩歌與禱告送別摯愛。</p>
                            <span class="inline-block w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:bg-primary group-hover:text-white transition">
                                <i class="fa-solid fa-arrow-right text-sm"></i>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="group relative">
                    <div class="overflow-hidden rounded-[2rem] shadow-soft bg-white/70 backdrop-blur-md h-full hover:-translate-y-2 transition duration-500 border border-white/50">
                        <div class="h-64 relative overflow-hidden">
                            <picture>
                                <source srcset="樹葬.webp" type="image/webp">
                                <img style="aspect-ratio: 4/3" src="樹葬.jpg">
                            </picture>
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-60 group-hover:opacity-40 transition"></div>
                            <span class="absolute bottom-4 left-6 text-white text-xs tracking-widest uppercase border border-white/30 px-2 py-1 rounded backdrop-blur-sm">Eco-Friendly</span>
                        </div>
                        <div class="p-8">
                            <h3 class="text-2xl font-serif font-bold text-primaryDark mb-3">環保葬 (樹葬/海葬)</h3>
                            <p class="text-gray-500 text-sm leading-relaxed mb-6">回歸自然，生生不息。華梵協助申請台中市府樹葬與海葬服務，簡約而莊嚴。</p>
                            <span class="inline-block w-8 h-8 rounded-full bg-primary/10 text-primary flex items-center justify-center group-hover:bg-primary group-hover:text-white transition">
                                <i class="fa-solid fa-arrow-right text-sm"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>



    <!-- Calculator Section (Transparency Applied) -->
    <!-- 移除 bg-warm，改用 relative z-10 -->
    <section id="calculator" class="pt-36 pb-24 relative z-10">

	<!-- 修改顏色為透明度漸層，融入全域背景 -->
        <div class="absolute -top-[1px] left-0 w-full overflow-hidden leading-none opacity-90">
            <svg class="relative block w-[calc(100%+1.3px)] h-[60px] text-[#EBEDE9]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#EBEDE9"></path>
            </svg>
        </div>


        <div class="container mx-auto px-6">
            <div class="flex flex-col lg:flex-row items-start gap-12 lg:gap-20">
                <div class="lg:w-1/3 pt-8 sticky top-24">
                    <span class="text-accent font-bold tracking-[0.2em] uppercase text-sm block mb-3">Transparency</span>
                    <h2 class="text-4xl md:text-5xl font-serif font-bold text-primary mb-6">預算，<br>由您透明掌握</h2>
                    <p class="text-gray-600 mb-8 leading-loose text-justify border-l-2 border-gray-200 pl-4">
                        告別式不該是沉重的經濟負擔。我們提供業界首創的線上試算系統，讓您依照宗教、儀式規模與個人需求，快速獲得精準的費用預估。
                    </p>
                    <ul class="space-y-4 mb-8 text-gray-700 font-medium">
                        <li class="flex items-center gap-4 group"><div class="w-8 h-8 rounded-full bg-primary/10 shadow-sm flex items-center justify-center group-hover:bg-accent group-hover:text-white transition"><i class="fa-solid fa-check text-primary group-hover:text-white text-xs"></i></div> 無隱藏費用，項目條列清晰</li>
                        <li class="flex items-center gap-4 group"><div class="w-8 h-8 rounded-full bg-primary/10 shadow-sm flex items-center justify-center group-hover:bg-accent group-hover:text-white transition"><i class="fa-solid fa-sliders text-primary group-hover:text-white text-xs"></i></div> 可依預算彈性調整內容</li>
                        <li class="flex items-center gap-4 group"><div class="w-8 h-8 rounded-full bg-primary/10 shadow-sm flex items-center justify-center group-hover:bg-accent group-hover:text-white transition"><i class="fa-solid fa-file-pdf text-primary group-hover:text-white text-xs"></i></div> 下載完整報價單 (PDF)</li>
                    </ul>
                </div>

                <!-- Calculator Container: Increased transparency -->
                <div class="lg:w-2/3 w-full bg-white/50 backdrop-blur-xl p-8 md:p-12 rounded-[2rem] shadow-lg border border-white/60 relative overflow-hidden">
                    <!-- 裝飾背景 -->
                    <div class="absolute -top-20 -right-20 w-64 h-64 bg-accent/10 rounded-full blur-3xl pointer-events-none"></div>
                    
                    <!-- Calculator Inputs (Same as before) -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 relative z-10">
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-primaryDark">宗教信仰</label>
                            <div class="relative">
                                <select class="w-full p-4 bg-white/80 border border-gray-200 rounded-xl focus:ring-2 focus:ring-accent focus:border-transparent outline-none appearance-none cursor-pointer text-gray-700 font-medium shadow-sm hover:shadow transition">
                                    <option>一般民間信仰 (道教/佛教)</option>
                                    <option>基督教</option>
                                    <option>天主教</option>
                                    <option>無宗教信仰</option>
                                </select>
                                <div class="absolute right-4 top-1/2 -translate-y-1/2 text-accent pointer-events-none"><i class="fa-solid fa-caret-down"></i></div>
                            </div>
                        </div>
                        <!-- ... other inputs ... -->
                        <div class="space-y-2">
                            <label class="block text-sm font-bold text-primaryDark">儀式地點</label>
                            <div class="relative">
                                <select class="w-full p-4 bg-white/80 border border-gray-200 rounded-xl focus:ring-2 focus:ring-accent focus:border-transparent outline-none appearance-none cursor-pointer text-gray-700 font-medium shadow-sm hover:shadow transition">
                                    <option>市立殯儀館</option>
                                    <option>自宅治喪</option>
                                    <option>私人會館</option>
                                </select>
                                <div class="absolute right-4 top-1/2 -translate-y-1/2 text-accent pointer-events-none"><i class="fa-solid fa-caret-down"></i></div>
                            </div>
                        </div>
                        <div class="md:col-span-2 mt-4 space-y-4">
                            <div class="flex justify-between items-end">
                                <label class="block text-sm font-bold text-primaryDark">預計參與親友 (規模)</label>
                                <span class="text-white bg-accent px-3 py-1 rounded-md font-serif font-bold tracking-wider shadow-sm" id="guest-count-display">50 人</span>
                            </div>
                            <input type="range" min="10" max="300" step="10" value="50" class="w-full accent-accent" oninput="document.getElementById('guest-count-display').innerText = this.value + ' 人'">
                            <div class="flex justify-between text-xs text-gray-400 px-1">
                                <span>家祭</span>
                                <span>中型公祭</span>
                                <span>大型公祭</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-primaryDark rounded-2xl p-8 flex flex-col md:flex-row justify-between items-center gap-6 shadow-2xl relative overflow-hidden group">
                        <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                        <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-accent/20 rounded-full blur-2xl group-hover:bg-accent/30 transition duration-700"></div>
                        
                        <div class="relative z-10 text-center md:text-left">
                            <p class="text-accent text-xs mb-2 tracking-widest uppercase">Estimated Cost</p>
                            <p class="text-4xl md:text-5xl font-serif font-bold text-white tracking-wide">NT$ 158,000 <span class="text-lg font-sans font-light text-gray-400">起</span></p>
                        </div>
                        <button class="relative z-10 px-8 py-3 bg-accent text-primaryDark hover:bg-white hover:text-primaryDark transition rounded-full font-bold tracking-wider flex items-center gap-2 shadow-lg transform active:scale-95">
                            下載報價單 <i class="fa-solid fa-download"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- 服務介紹 -->
    <section class="pt-16 pb-28 md:pb-20 bg-transparent text-white overflow-hidden relative">

        <div class="container mx-auto px-4 relative z-10">
          
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

                <div class="group bg-surface rounded-xl p-6 text-center hover:-translate-y-3 transition duration-500 shadow-xl flex flex-col h-full">
    
    			<div class="w-16 h-16 mx-auto -mt-12 bg-primary rounded-full flex items-center justify-center border-4 border-surface shadow-lg mb-6 group-hover:bg-accent transition">
        			<i class="fa-solid fa-heart text-white text-2xl"></i>
    			</div>
    
    			<div class="h-48 overflow-hidden rounded-lg mb-6 relative shrink-0"> <picture>
                    <source srcset="spa.webp" type="image/webp">
                    <img src="spa.png" alt="禮體淨身 SPA" loading="lazy" decoding="async">
                </picture>
        			<div class="absolute inset-0 bg-black/10 group-hover:bg-transparent transition"></div>
    			</div>
    
    			<h3 class="text-2xl font-serif font-bold mb-3 text-primary">禮體淨身 SPA</h3>
    
    			<p class="text-gray-500 text-sm leading-relaxed mb-6 px-4">
        如同對待生者般的溫柔觸碰，透過專業的SPA淨身技術，洗去病痛，回復安詳容顏。
    			</p>
    
    			<a href="#" class="inline-block px-6 py-2 bg-warm text-primary rounded-full text-sm font-bold hover:bg-primary hover:text-white transition mt-auto">
        立即諮詢
    			</a>
		</div>

		<div class="group bg-surface rounded-xl p-6 text-center hover:-translate-y-3 transition duration-500 shadow-xl flex flex-col h-full mt-8 md:mt-0">
    
    			<div class="w-16 h-16 mx-auto -mt-12 bg-primary rounded-full flex items-center justify-center border-4 border-surface shadow-lg mb-6 group-hover:bg-accent transition">
        			<i class="fa-solid fa-heart text-white text-2xl"></i>
    			</div>
    
    			<div class="h-48 overflow-hidden rounded-lg mb-6 relative shrink-0"> <img src="https://images.unsplash.com/photo-1603006905003-be475563bc59?q=80&w=2070&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-110 transition duration-700" alt="會場佈置花藝" loading="lazy" decoding="async">
        			<div class="absolute inset-0 bg-black/10 group-hover:bg-transparent transition"></div>
    			</div>
    
    			<h3 class="text-2xl font-serif font-bold mb-3 text-primary">會場佈置花藝</h3>
    
    			<p class="text-gray-500 text-sm leading-relaxed mb-6 px-4">
        捨棄擁擠的傳統罐頭塔，採用客製化鮮花佈置。無論是溫馨歐式或莊嚴日式，皆能呈現。
    			</p>
    
    			<a href="#" class="inline-block px-6 py-2 bg-warm text-primary rounded-full text-sm font-bold hover:bg-primary hover:text-white transition mt-auto">
        觀看作品
    			</a>
		</div>


		<div class="group bg-surface rounded-xl p-6 text-center hover:-translate-y-3 transition duration-500 shadow-xl flex flex-col h-full mt-16 md:mt-0">
    
    			<div class="w-16 h-16 mx-auto -mt-12 bg-primary rounded-full flex items-center justify-center border-4 border-surface shadow-lg mb-6 group-hover:bg-accent transition">
        			<i class="fa-solid fa-heart text-white text-2xl"></i>
    			</div>
    
    			<div class="h-48 overflow-hidden rounded-lg mb-6 relative shrink-0"> <picture>
                    <source srcset="unnamed.webp" type="image/webp">
                    <img src="unnamed.png" alt="靜心私人會館" loading="lazy" decoding="async">
                </picture>
        			<div class="absolute inset-0 bg-black/10 group-hover:bg-transparent transition"></div>
    			</div>
    
    			<h3 class="text-2xl font-serif font-bold mb-3 text-primary"> 靜心私人會館</h3>
    
    			<p class="text-gray-500 text-sm leading-relaxed mb-6 px-4">
        遠離公立殯儀館的喧囂與冰冷。我們提供飯店級的獨立治喪空間，溫馨典雅的環境設計，讓家屬擁有絕對的隱私，在最舒適的氛圍中凝聚情感，陪伴摯愛最後一程。
    			</p>
    
    			<a href="#" class="inline-block px-6 py-2 bg-warm text-primary rounded-full text-sm font-bold hover:bg-primary hover:text-white transition mt-auto">
        預約參觀
    			</a>
		</div>
                
            </div>
        </div>
    </section>



    <!-- ... (Resources, Locations, Footer keep z-index adjustments similarly) ... -->
    <!-- Resources Section -->
    <section id="resources" class="pt-8 pb-32 relative overflow-hidden z-10 bg-transparent">
        <!-- 1. 背景紋理：加上 mask-image 讓紋理在頂部與底部漸變消失 (Fade In/Out) -->
        <div class="absolute inset-0 opacity-10 pointer-events-none" 
             style="background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMiIgY3k9IjIiIHI9IjIiIGZpbGw9IiM0NjVCNDAiLz48L3N2Zz4=');
                    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 45%, black 50%, transparent 100%);
                    mask-image: linear-gradient(to bottom, transparent 0%, black 45%, black 50%, transparent 100%);">
        </div>
         <div class="container mx-auto px-6 relative z-10">
            <div class="flex flex-wrap justify-center gap-6 md:gap-8">
                <a href="#" class="group relative w-40 h-40 md:w-48 md:h-48 rounded-[30%_70%_70%_30%/30%_30%_70%_70%] bg-[#EBEDE9]/80 backdrop-blur-md border border-white/60 shadow-stone hover:bg-white hover:shadow-xl hover:scale-105 transition-all duration-500 flex flex-col items-center justify-center text-center p-4">
                    <div class="text-3xl text-accent mb-3 group-hover:-translate-y-1 transition duration-300"><i class="fa-solid fa-hand-holding-dollar"></i></div>
                    <h3 class="text-primary font-bold mb-1 text-lg">喪葬補助</h3>
                    <p class="text-gray-500 text-xs font-medium">勞保/國保申請</p>
                </a>
                <!-- ... other bubbles ... -->
                 <a href="#" class="group relative w-40 h-40 md:w-48 md:h-48 rounded-[70%_30%_30%_70%/60%_40%_60%_40%] bg-[#EBEDE9]/80 backdrop-blur-md border border-white/60 shadow-stone hover:bg-white hover:shadow-xl hover:scale-105 transition-all duration-500 flex flex-col items-center justify-center text-center p-4 mt-8 md:mt-12">
                    <div class="text-3xl text-accent mb-3 group-hover:-translate-y-1 transition duration-300"><i class="fa-solid fa-book-journal-whills"></i></div>
                    <h3 class="text-primary font-bold mb-1 text-lg">禮儀百科</h3>
                    <p class="text-gray-500 text-xs font-medium">習俗與禁忌</p>
                </a>
                <a href="#" class="group relative w-40 h-40 md:w-48 md:h-48 rounded-[50%_50%_20%_80%/25%_25%_75%_75%] bg-[#EBEDE9]/80 backdrop-blur-md border border-white/60 shadow-stone hover:bg-white hover:shadow-xl hover:scale-105 transition-all duration-500 flex flex-col items-center justify-center text-center p-4">
                    <div class="text-3xl text-accent mb-3 group-hover:-translate-y-1 transition duration-300"><i class="fa-solid fa-file-signature"></i></div>
                    <h3 class="text-primary font-bold mb-1 text-lg">契約書表</h3>
                    <p class="text-gray-500 text-xs font-medium">下載範本文件</p>
                </a>
                <a href="#" class="group relative w-40 h-40 md:w-48 md:h-48 rounded-[20%_80%_20%_80%/50%_50%_50%_50%] bg-[#EBEDE9]/80 backdrop-blur-md border border-white/60 shadow-stone hover:bg-white hover:shadow-xl hover:scale-105 transition-all duration-500 flex flex-col items-center justify-center text-center p-4 mt-8 md:mt-12">
                    <div class="text-3xl text-accent mb-3 group-hover:-translate-y-1 transition duration-300"><i class="fa-solid fa-gavel"></i></div>
                    <h3 class="text-primary font-bold mb-1 text-lg">合法查詢</h3>
                    <p class="text-gray-500 text-xs font-medium">內政部名冊</p>
                </a>
                <a href="#" class="group relative w-40 h-40 md:w-48 md:h-48 rounded-[80%_20%_80%_20%/50%_50%_50%_50%] bg-[#EBEDE9]/80 backdrop-blur-md border border-white/60 shadow-stone hover:bg-white hover:shadow-xl hover:scale-105 transition-all duration-500 flex flex-col items-center justify-center text-center p-4">
                    <div class="text-3xl text-accent mb-3 group-hover:-translate-y-1 transition duration-300"><i class="fa-solid fa-circle-question"></i></div>
                    <h3 class="text-primary font-bold mb-1 text-lg">常見問題</h3>
                    <p class="text-gray-500 text-xs font-medium">百日對年計算</p>
                </a>
            </div>
         </div>
    </section>

    <!-- Locations -->
    <section id="locations" class="pt-2 pb-32 md:pb-40 relative z-10 bg-gradient-to-b from-transparent to-[#F0F5F2] via-[#F0F5F2] via-80% relative">
        <div class="container mx-auto px-6">
            <div class="bg-surface rounded-[3rem] p-4 shadow-soft overflow-hidden flex flex-col lg:flex-row border border-white">
                <!-- ... content ... -->
                 <div class="lg:w-1/3 p-8 lg:p-12">
                    <span class="text-accent font-bold tracking-[0.2em] uppercase text-sm block mb-2">Locations</span>
                    <h2 class="text-3xl font-serif font-bold text-primaryDark mb-6">服務據點</h2>
                    <p class="text-gray-600 mb-8 leading-relaxed">華梵禮儀服務範圍遍及大台中地區，隨時為您提供就近協助。我們設有專屬洽談室，提供隱私且安靜的諮詢環境。</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-center gap-4 p-4 rounded-2xl bg-warm hover:bg-white border border-transparent hover:border-gray-200 hover:shadow-sm transition cursor-pointer group">
                            <div class="w-10 h-10 rounded-full bg-accent/20 flex items-center justify-center text-accent group-hover:bg-accent group-hover:text-white transition">
                                <i class="fa-solid fa-location-dot"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-primaryDark">總公司</h4>
                                <p class="text-sm text-gray-500">台中市北區學士路257號9樓</p>
                            </div>
                        </div>
                         <div class="flex items-center gap-4 p-4 rounded-2xl bg-warm/50 hover:bg-white border border-transparent hover:border-gray-200 hover:shadow-sm transition cursor-pointer group">
                             <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 group-hover:bg-primary group-hover:text-white transition">
                                <i class="fa-solid fa-hospital"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-primaryDark">林新醫院服務處</h4>
                                <p class="text-sm text-gray-500">台中市南屯區惠中路三段36號</p>
                            </div>
                        </div>
                    </div>
                    
                    <a href="https://maps.google.com" target="_blank" class="mt-8 inline-flex items-center text-accent font-bold text-sm hover:underline">
                        開啟 Google Maps 導航 <i class="fa-solid fa-arrow-up-right-from-square ml-2"></i>
                    </a>
                </div>
                
                <div class="lg:w-2/3 h-80 lg:h-auto bg-gray-200 rounded-[2.5rem] overflow-hidden relative">
                    <!-- Embedded Google Map -->
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3640.217354181829!2d120.68000000000000!3d24.15900000000000!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34693d7c3b000001%3A0x1234567890abcdef!2z5Y-w5Lit5biC5YyX5Y2A5a245aOr6LevMjU36JmfOQ!5e0!3m2!1szh-TW!2stw!4v1620000000000!5m2!1szh-TW!2stw" 
                        width="100%" 
                        height="100%" 
                        style="border:0; filter: grayscale(0.5);" 
                        allowfullscreen="" 
                        loading="lazy">
                    </iframe>
                    <div class="absolute inset-0 pointer-events-none shadow-[inset_0_0_40px_rgba(0,0,0,0.1)]"></div>
                </div>
            </div>
        </div>
    </section>

<!-- Footer ... -->
<footer class="bg-secondary text-gray-400 py-8 text-sm font-light relative z-30">
    <div class="absolute top-0 left-0 w-full overflow-hidden leading-[0] -translate-y-[99%] z-0 pointer-events-none">
        <svg class="relative block w-[calc(100%+1.3px)] h-[50px] md:h-[100px]" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V120H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#2F3E2B"></path>
        </svg>
    </div>

<div 
        class="absolute -top-[50px] md:-top-[100px] left-0 w-full h-[calc(100%+50px)] md:h-[calc(100%+100px)] overflow-hidden pointer-events-none z-10 mix-blend-screen"
        style="mask-image: linear-gradient(to top, black 80%, transparent 100%); -webkit-mask-image: linear-gradient(to top, black 80%, transparent 100%);"
    >
        
        <div class="absolute bottom-0 -right-[120px] md:-right-[150px] w-[500px] h-[500px] md:w-[850px] md:h-[850px] opacity-30">
             <style>
                @keyframes spin-slow {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
                .animate-spin-slower {
                    animation: spin-slow 120s linear infinite;
                }
            </style>
            <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg" class="w-full h-full">
                <defs>
                    <radialGradient id="orangeGlow" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                        <stop offset="0%" style="stop-color:#FFB347; stop-opacity:0.9" /> <stop offset="70%" style="stop-color:#FF8C00; stop-opacity:0.6" /> <stop offset="100%" style="stop-color:#FF8C00; stop-opacity:0" />
                    </radialGradient>
                    <radialGradient id="greenGlow" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                        <stop offset="40%" style="stop-color:#A3D9A5; stop-opacity:0.6" /> <stop offset="80%" style="stop-color:#465B40; stop-opacity:0.4" /> <stop offset="100%" style="stop-color:#2F3E2B; stop-opacity:0" />
                    </radialGradient>
                    <mask id="fadeMask">
                        <radialGradient id="maskGrad">
                            <stop offset="0%" stop-color="white" />
                            <stop offset="70%" stop-color="white" />
                            <stop offset="100%" stop-color="black" />
                        </radialGradient>
                        <circle cx="250" cy="250" r="250" fill="url(#maskGrad)" />
                    </mask>
                </defs>
                <g class="animate-spin-slower" style="transform-origin: center;">
                    <circle cx="250" cy="250" r="180" fill="none" stroke="#FFD700" stroke-width="200" stroke-dasharray="4 40" opacity="0.08" mask="url(#fadeMask)" />
                    <circle cx="250" cy="250" r="120" fill="none" stroke="#FFE4B5" stroke-width="100" stroke-dasharray="2 30" opacity="0.12" mask="url(#fadeMask)" transform="rotate(15 250 250)" />
                </g>
                
                <circle cx="250" cy="250" r="150" fill="url(#greenGlow)" stroke="none" opacity="0.5" />
                <circle cx="250" cy="250" r="90" fill="url(#orangeGlow)" stroke="none" opacity="0.8" />

                <path transform="translate(30, 20)" d="M180 130 Q190 180 230 180 Q190 180 180 230 Q170 180 130 180 Q170 180 180 130 Z" fill="#FFFACD" opacity="0.8" filter="blur(0.5px)">
                    <animate attributeName="opacity" values="0.6;0.9;0.6" dur="4s" repeatCount="indefinite" />
                </path>
                
                <circle cx="300" cy="300" r="25" fill="#FF8C00" opacity="0.7">
                     <animate attributeName="opacity" values="0.5;0.8;0.5" dur="3s" repeatCount="indefinite" />
                </circle>
            </svg>
        </div>
    </div>
    <!-- ... same footer content ... -->
    <div class="container mx-auto px-4 relative z-20">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
            <div class="col-span-1 md:col-span-2">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-8 h-8 bg-accent text-secondary flex items-center justify-center rounded-full font-serif font-bold">華</div>
                    <h4 class="text-white text-2xl font-serif font-bold tracking-widest">華梵禮儀</h4>
                </div>
                <p class="mb-6 max-w-sm leading-loose text-gray-300">
                    我們相信，好的道別能撫平生者的傷痛。<br>
                    華梵致力於提供透明、專業且充滿溫度的生命禮儀服務，讓愛延續。
                </p>
                <div class="space-y-2">
                     <p class="flex items-center gap-3"><i class="fa-solid fa-phone text-accent"></i> <span class="text-white tracking-wider">0800-800-818</span> <span class="text-xs bg-white/10 px-2 py-0.5 rounded">24H</span></p>
                     <p class="flex items-center gap-3"><i class="fa-solid fa-location-dot text-accent"></i> 台中市北區學士路 257 號 9 樓</p>
                </div>
            </div>
            <div>
                <h4 class="text-white font-bold mb-6 text-lg">快速連結</h4>
                <ul class="space-y-3">
                    <li><a href="#" class="hover:text-accent transition flex items-center gap-2"><i class="fa-solid fa-angle-right text-xs"></i> 臨終關懷 SOP</a></li>
                    <li><a href="#" class="hover:text-accent transition flex items-center gap-2"><i class="fa-solid fa-angle-right text-xs"></i> 服務費用試算</a></li>
                    <li><a href="#" class="hover:text-accent transition flex items-center gap-2"><i class="fa-solid fa-angle-right text-xs"></i> 合法塔位查詢</a></li>
                    <li><a href="#" class="hover:text-accent transition flex items-center gap-2"><i class="fa-solid fa-angle-right text-xs"></i> 生命禮儀百科</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-bold mb-6 text-lg">關注我們</h4>
                <div class="flex gap-4">
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-[#06C755] hover:text-white transition duration-300"><i class="fa-brands fa-line text-lg"></i></a>
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-[#1877F2] hover:text-white transition duration-300"><i class="fa-brands fa-facebook-f text-lg"></i></a>
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-[#E4405F] hover:text-white transition duration-300"><i class="fa-brands fa-instagram text-lg"></i></a>
                </div>
                <div class="mt-8 p-4 bg-white/5 rounded border border-white/10 relative overflow-hidden group">
                     <div class="absolute inset-0 bg-accent/10 translate-y-full group-hover:translate-y-0 transition duration-500"></div>
                    <p class="text-xs text-gray-300 mb-1 relative z-10">需要立即協助？</p>
                    <a href="tel:0800800818" class="text-accent font-bold text-lg hover:underline relative z-10">撥打 0800-800-818</a>
                </div>
            </div>
        </div>
        <div class="border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-500 relative z-10">
            <p>&copy; 2025 華梵禮儀有限公司 All Rights Reserved. 許可證號：府授經商字第10907655990號</p>
        </div>
    </div>
</footer>


<!-- 圖片彈出視窗 (Image Modal) -->
<!-- 修改：背景透明度改為 bg-black/50，移除 backdrop-blur-md -->
<div id="image-modal" class="fixed inset-0 z-[150] hidden flex flex-col items-center justify-center bg-black/50 opacity-0 transition-opacity duration-300 p-4" onclick="closeImageModal()">
    <!-- 關閉按鈕 -->
    <!-- 修改：文字顏色加強對比 -->
    <button class="absolute top-6 right-6 text-white/80 hover:text-white transition transform hover:scale-110 p-2 z-50">
        <i class="fa-solid fa-xmark text-4xl shadow-sm"></i>
    </button>
    
    <!-- 圖片容器 -->
    <!-- 修改：移除背景色 (bg-surface/10)、模糊 (backdrop-blur-sm) 與邊框 (border)，讓圖片直接懸浮 -->
    <!-- 寬度調整為 max-w-4xl 以適應大圖 -->
    <div class="relative max-w-4xl w-full max-h-[85vh] flex flex-col items-center" onclick="event.stopPropagation()">
        <!-- 圖片標題 -->
        <!-- 修改：加入 drop-shadow 以確保在半透明背景上的可讀性 -->
        <h3 id="modal-title" class="text-white text-xl md:text-2xl font-serif font-bold mb-4 tracking-widest text-center opacity-0 translate-y-4 transition-all duration-500 delay-100 drop-shadow-md"></h3>
        
        <!-- 圖片本體 -->
        <!-- 修改：最大高度改為 max-h-[75vh]，陰影保留 -->
        <img id="modal-image" src="" alt="Certificate" class="w-auto h-auto max-w-full max-h-[75vh] object-contain rounded-lg shadow-2xl scale-95 opacity-0 transition-all duration-500 transform">
        
        <!-- 提示文字 -->
        <!-- 修改：顏色改為 text-white/80 並加陰影 -->
        <p class="text-white/80 text-xs mt-4 tracking-widest opacity-0 transition-all duration-500 delay-200 drop-shadow-sm" id="modal-hint">點擊任意處關閉</p>
    </div>
</div>


<script>
    // ... (Script remains largely same, just ensuring modal logic is correct)
    
    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.add('hidden-content');
        });
        const selectedContent = document.getElementById('content-' + tabId);
        if(selectedContent) {
            selectedContent.classList.remove('hidden-content');
        }
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        const activeBtn = document.getElementById('btn-' + tabId);
        if(activeBtn) {
            activeBtn.classList.add('active');
            activeBtn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        }
    }

    // Background Setters

    // Background Setters
    function setPricingBg(id) {
        // --- 1. 背景圖切換邏輯 (原有功能) ---
        ['bg-contract', 'bg-pricing', 'bg-nored'].forEach(bg => {
             const el = document.getElementById(bg);
             if(el) {
                 el.classList.remove('opacity-15');
                 el.classList.add('opacity-0');
             }
        });
        const target = document.getElementById('bg-' + id);
        if(target) {
            target.classList.remove('opacity-0');
            target.classList.add('opacity-15');
        }

        // --- 2. 圓點狀態切換邏輯 (新增修復) ---
        // 定義 id 對應的圓點 id
        const dotMap = {
            'contract': 'dot-contract',
            'pricing': 'dot-pricing',
            'nored': 'dot-nored'
        };

        // 遍歷所有圓點進行狀態更新
        Object.keys(dotMap).forEach(key => {
            const dotId = dotMap[key];
            const dotEl = document.getElementById(dotId);
            
            if (dotEl) {
                if (key === id) {
                    // 如果是當前選中的項目 -> 亮色 (bg-accent)
                    dotEl.classList.remove('bg-gray-300');
                    dotEl.classList.add('bg-accent');
                } else {
                    // 其他項目 -> 灰色 (bg-gray-300)
                    dotEl.classList.remove('bg-accent');
                    dotEl.classList.add('bg-gray-300');
                }
            }
        });
    }
    
    function resetPricingBg() {
         ['bg-contract', 'bg-pricing', 'bg-nored'].forEach(bg => {
             const el = document.getElementById(bg);
             if(el) {
                 el.classList.remove('opacity-15');
                 el.classList.add('opacity-0');
             }
        });
    }



    function setAwardsBg(id) {
        ['award-bg-114', 'award-bg-111', 'award-bg-107', 'award-bg-103'].forEach(bg => {
             const el = document.getElementById(bg);
             if(el) {
                 el.classList.remove('opacity-30');
                 el.classList.add('opacity-0');
             }
        });
        const target = document.getElementById('award-bg-' + id);
        if(target) {
            target.classList.remove('opacity-0');
            target.classList.add('opacity-30');
        }
    }

    function resetAwardsBg() {
        ['award-bg-114', 'award-bg-111', 'award-bg-107', 'award-bg-103'].forEach(bg => {
             const el = document.getElementById(bg);
             if(el) {
                 el.classList.remove('opacity-30');
                 el.classList.add('opacity-0');
             }
        });
    }

    // Modal Logic
    function openImageModal(imgSrc, titleText) {
        const modal = document.getElementById('image-modal');
        const modalImg = document.getElementById('modal-image');
        const modalTitle = document.getElementById('modal-title');
        const modalHint = document.getElementById('modal-hint');

        modalImg.src = imgSrc;
        modalTitle.innerText = titleText;

        modal.classList.remove('hidden');
        modal.classList.add('flex');
        
        requestAnimationFrame(() => {
            modal.classList.remove('opacity-0');
            modal.classList.add('opacity-100');
            modalImg.classList.remove('scale-95', 'opacity-0');
            modalImg.classList.add('scale-100', 'opacity-100');
            modalTitle.classList.remove('translate-y-4', 'opacity-0');
            modalTitle.classList.add('translate-y-0', 'opacity-100');
            modalHint.classList.remove('opacity-0');
            modalHint.classList.add('opacity-100');
        });
        document.body.style.overflow = 'hidden';
    }

    function closeImageModal() {
        const modal = document.getElementById('image-modal');
        const modalImg = document.getElementById('modal-image');
        const modalTitle = document.getElementById('modal-title');
        const modalHint = document.getElementById('modal-hint');

        modal.classList.remove('opacity-100');
        modal.classList.add('opacity-0');
        modalImg.classList.remove('scale-100', 'opacity-100');
        modalImg.classList.add('scale-95', 'opacity-0');
        modalTitle.classList.remove('translate-y-0', 'opacity-100');
        modalTitle.classList.add('translate-y-4', 'opacity-0');
        modalHint.classList.remove('opacity-100');
        modalHint.classList.add('opacity-0');

        setTimeout(() => {
            modal.classList.remove('flex');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }, 300);
    }

    document.addEventListener('DOMContentLoaded', function() {
        // Menu Logic
        const menuBtn = document.getElementById('menu-btn');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        const fullScreenMenu = document.getElementById('full-screen-menu');
        const menuLinks = document.querySelectorAll('.menu-link');

        function toggleMenu() {
            const isHidden = fullScreenMenu.classList.contains('hidden');
            if (isHidden) {
                fullScreenMenu.classList.remove('hidden');
                fullScreenMenu.classList.add('flex');
                document.body.style.overflow = 'hidden';
                requestAnimationFrame(() => {
                    fullScreenMenu.style.opacity = '1';
                });
            } else {
                fullScreenMenu.style.opacity = '0';
                document.body.style.overflow = '';
                setTimeout(() => {
                    fullScreenMenu.classList.add('hidden');
                    fullScreenMenu.classList.remove('flex');
                }, 300);
            }
        }

        if (menuBtn) menuBtn.addEventListener('click', toggleMenu);
        if (closeMenuBtn) closeMenuBtn.addEventListener('click', toggleMenu);
        menuLinks.forEach(link => link.addEventListener('click', toggleMenu));

        // Initial Setup
        setPricingBg('contract');
        setAwardsBg('114'); // Default background for awards
        
        // ✅ Scroll Listener for Mobile (Pricing Section) - 優化版：節流 + 快取
        const pricingScrollContainer = document.getElementById('pricing-features-scroll');
        const pricingCards = document.querySelectorAll('.pricing-feature-card');

        if (pricingScrollContainer && pricingCards.length > 0) {
            let throttleTimeout = null;
            let lastBgId = null;
            
            const handleScroll = () => {
                const containerCenter = pricingScrollContainer.getBoundingClientRect().left + pricingScrollContainer.offsetWidth / 2;
                
                let closestCard = null;
                let minDistance = Infinity;

                pricingCards.forEach(card => {
                    const cardRect = card.getBoundingClientRect();
                    const cardCenter = cardRect.left + cardRect.width / 2;
                    const distance = Math.abs(containerCenter - cardCenter);

                    if (distance < minDistance) {
                        minDistance = distance;
                        closestCard = card;
                    }
                });

                if (closestCard) {
                    const bgId = closestCard.getAttribute('data-bg-id');
                    if (bgId && bgId !== lastBgId) {
                        lastBgId = bgId;
                        setPricingBg(bgId);
                    }
                }
            };

            const throttledScroll = () => {
                if (!throttleTimeout) {
                    throttleTimeout = setTimeout(() => {
                        handleScroll();
                        throttleTimeout = null;
                    }, 150);
                }
            };

            pricingScrollContainer.addEventListener('scroll', throttledScroll, { passive: true });
        }

        // ✅ Scroll Listener for Mobile (Awards Section) - 優化版：節流 + 快取
        const awardsScrollContainer = document.getElementById('timeline-container');
        const awardsCards = document.querySelectorAll('.award-card');

        if (awardsScrollContainer && awardsCards.length > 0) {
            let throttleTimeout = null;
            let lastAwardBgId = null;
            
            const handleAwardsScroll = () => {
                const containerCenter = awardsScrollContainer.getBoundingClientRect().left + awardsScrollContainer.offsetWidth / 2;
                
                let closestCard = null;
                let minDistance = Infinity;

                awardsCards.forEach(card => {
                    const cardRect = card.getBoundingClientRect();
                    const cardCenter = cardRect.left + cardRect.width / 2;
                    const distance = Math.abs(containerCenter - cardCenter);

                    if (distance < minDistance) {
                        minDistance = distance;
                        closestCard = card;
                    }
                });

                if (closestCard) {
                    const bgId = closestCard.getAttribute('data-bg-id');
                    if (bgId && bgId !== lastAwardBgId) {
                        lastAwardBgId = bgId;
                        setAwardsBg(bgId);
                    }
                }
            };

            const throttledAwardsScroll = () => {
                if (!throttleTimeout) {
                    throttleTimeout = setTimeout(() => {
                        handleAwardsScroll();
                        throttleTimeout = null;
                    }, 150);
                }
            };

            awardsScrollContainer.addEventListener('scroll', throttledAwardsScroll, { passive: true });
        }

                // ===== 新增：試算器即時更新邏輯 =====
        const religionPrices = {
            '一般民間信仰 (道教/佛教)': 158000,
            '基督教': 165000,
            '天主教': 160000,
            '無宗教信仰': 145000
        };

        const locationFactors = {
            '市立殯儀館': 1.0,
            '自宅治喪': 1.15,
            '私人會館': 1.35
        };

        // ✅ 優化計算機：快取DOM參考、防抖、批次化樣式修改
        let calcUpdateTimeout = null;
        let lastCalculatedPrice = null;
        let cachedPriceDisplay = null;
        
        function updateCalculatorPrice() {
            const calcSection = document.getElementById('calculator');
            if (!calcSection) return;

            // 第一次執行時快取DOM參考
            if (!cachedPriceDisplay) {
                cachedPriceDisplay = calcSection.querySelector('.text-4xl.md\\:text-5xl.font-serif.font-bold.text-white.tracking-wide');
            }

            const selects = calcSection.querySelectorAll('select');
            const rangeInput = calcSection.querySelector('input[type="range"]');
            const priceDisplay = cachedPriceDisplay;
            
            if (selects.length < 2 || !rangeInput || !priceDisplay) return;

            // 批量讀取
            const religion = selects[0].value;
            const location = selects[1].value;
            const guestCount = parseInt(rangeInput.value) || 50;

            // 計算
            const basePrice = religionPrices[religion] || 158000;
            const locationFactor = locationFactors[location] || 1.0;
            const guestAdditional = Math.floor((guestCount / 50) * 8000);
            const estimatedPrice = Math.floor(basePrice * locationFactor + guestAdditional);

            // 避免不必要的更新
            if (estimatedPrice === lastCalculatedPrice) return;
            lastCalculatedPrice = estimatedPrice;

            // 清除之前的防抖計時器
            clearTimeout(calcUpdateTimeout);
            
            // 使用 requestAnimationFrame 優化樣式更新
            calcUpdateTimeout = requestAnimationFrame(() => {
                // 批次化：使用 cssText 代替逐個style修改
                priceDisplay.style.cssText = 'transition: all 0.3s ease; transform: scale(1.05);';
                priceDisplay.innerHTML = `NT$ ${estimatedPrice.toLocaleString()} <span class="text-lg font-sans font-light text-gray-400">起</span>`;
                
                // 異步恢復縮放
                setTimeout(() => {
                    priceDisplay.style.transform = 'scale(1)';
                }, 150);
            });
        }

        // 綁定所有試算器的輸入元素
        const calcSection = document.getElementById('calculator');
        if (calcSection) {
            const calcSelects = calcSection.querySelectorAll('select');
            const calcRange = calcSection.querySelector('input[type="range"]');

            calcSelects.forEach(select => {
                // change 事件（選擇改變時）
                select.addEventListener('change', updateCalculatorPrice);
                // 初始化一次
                updateCalculatorPrice();
            });
            
            if (calcRange) {
                // input 事件（實時滑動）
                calcRange.addEventListener('input', updateCalculatorPrice);
            }
        }

        // 初始化試算器顯示
        updateCalculatorPrice();

    });

</script>
</body>
</html>